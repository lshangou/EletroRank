<%- include('includes/header', {title: 'Cadastro de Produtos', user: user}) %>
  <main class="container mt-3">
    <div class="row">
      <div class="col-12">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/">Home</a></li>
            <li class="breadcrumb-item active" aria-current="page">Cadastro</li>
          </ol>
        </nav>
      </div>
    </div>
    <div class="row">
      <div class="mb-3 col-4">
        <label for="email" class="form-label">E-mail:</label>
        <input class="form-control" placeholder="usuario@email.com" type="text" id="email">
      </div>
      <div class="mb-3 col-4">
        <label for="nome" class="form-label">Nome Completo:</label>
        <input class="form-control" placeholder="Seu Nome" type="text" id="nome">
      </div>
      <div class="mb-3 col-4">
        <label for="senha" class="form-label">Senha:</label>
        <input class="form-control" placeholder="*********" type="password" id="senha">
      </div>
      <div class="col-12">
        <button class="btn btn-primary" onclick="cadastrar()">Cadastrar</button>
      </div>
    </div>
    <div id="alert">

    </div>
    
  </main>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script>
    function cadastrar() {
      axios.post('/cadastrar-pessoa', {
        email: document.getElementById('email').value,
        nome: document.getElementById('nome').value,
        senha: document.getElementById('senha').value
      })
      .then(function (response) {
        // handle success
        console.log(response);
        document.getElementById('alert').innerHTML = '<div id="success" class="alert alert-success alert-dismissible fade show mt-3" role="alert"><strong>Sucesso!</strong> VocÃª foi cadastrado com sucesso, ' + response.data.nome + '!<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button></div>'
      })
      .catch(function (error) {
        // handle error
        console.log(error);
      })
    }
  </script>
<%- include('includes/footer') %>